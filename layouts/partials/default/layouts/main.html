
{{ $section := or (index .Site.Data.section (or .Section (or .Data.Singular (.Title|lower)))) .Params }}
{{ $theme := index .Site.Data.themes (or (and (ne .Title .Site.Title) .Params.theme) (or $section.theme (or .Site.Params.theme "default"))) }}

<!-- HEADER -->
<div class="wrapper">
{{ range $index, $layout := $theme.header.components }}
	{{ if (in $layout "<HTML>") }} {{ (replace $layout "<HTML>" "") | safeHtml }}
	{{ else }} {{ partial $layout $ }} {{ end }}
{{ end }}


<!-- SECTION -->
<div class="main">
<div class="container">
	<div class="row clearfix">
		<div class="col-md-9 column">
		{{ range $index, $layout := $theme.section.components }}
			{{ if (in $layout "<HTML>") }} {{ (replace $layout "<HTML>" "") | safeHtml }}
			{{ else }} {{ partial $layout $ }} {{ end }}
		{{ end }}


<!-- ARTICLE
	TODO: Make Content/Artcle layout include the components used?
		Move page_fold to content layout?
-->
{{ range $index, $layout := $theme.article.components }}
	{{ if (in $layout "<HTML>") }} {{ (replace $layout "<HTML>" "") | safeHtml }}
	{{ else }} {{ partial $layout $ }} {{ end }}
{{ end }}

</div><!--/article panel-body-->


<!-- PAGE_FOLD -->
<div class="panel-footer">
{{ range $index, $layout := $theme.page_fold.components }}
	{{ if (in $layout "<HTML>") }} {{ (replace $layout "<HTML>" "") | safeHtml }}
	{{ else }} {{ partial $layout $ }} {{ end }}
{{ end }}
</div>

</div><!--/panel-->
</div><!--/col-md-9 column-->



<!-- ASIDE
	TODO: Iterate over elements, contain them within rows+columns
-->
<aside class="content-secondary col-md-3 column">
{{ range $index, $layout := $theme.page_fold.components }}
	{{ if (in $layout "<HTML>") }} {{ (replace $layout "<HTML>" "") | safeHtml }}
	{{ else }} {{ partial $layout $ }} {{ end }}
{{ end }}
</aside>


</div><!--/row-->
</div><!--/container-->
</div><!--/main-->

<div class="push"></div>
</div> <!--wrapper-->



<!-- FOOTER -->
<span class="voffset10">&nbsp;</span>
<div class="container">
{{ range $index, $layout := $theme.footer.components }}
	{{ if (in $layout "<HTML>") }} {{ (replace $layout "<HTML>" "") | safeHtml }}
	{{ else }} {{ partial $layout $ }} {{ end }}
{{ end }}
</div>



